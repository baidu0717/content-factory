# 飞书复刻链接使用说明

## ✅ 已完成的配置

### 1. 您已创建的字段
- ✅ **复刻链接**（URL/超链接类型）

### 2. 系统已准备的功能
- ✅ 自动生成复刻链接的API
- ✅ 一键生成所有链接的页面
- ✅ 复刻页面的数据自动填充功能

---

## 📋 使用步骤

### 第一步：生成复刻链接

1. 在浏览器中打开：
   ```
   http://localhost:3000/generate-links
   ```

2. 点击 **"开始生成"** 按钮

3. 等待几分钟，系统会：
   - 读取飞书表格中的所有笔记
   - 为每条笔记生成包含标题、正文、标签的完整URL
   - 将URL写入"复刻链接"字段

4. 看到"生成完成"提示后，查看统计信息：
   - 总记录数
   - 成功生成数量
   - 跳过数量（标题或正文为空的记录）
   - 失败数量（如有）

### 第二步：使用复刻链接

1. 打开飞书多维表格

2. 找到任意一行笔记，查看"复刻链接"列

3. **点击链接**

4. 会自动跳转到复刻页面，并且：
   - ✅ 标题已自动填充
   - ✅ 正文已自动填充
   - ✅ 话题标签已自动填充

5. 您可以：
   - 点击"一键改写"按钮分别改写标题和正文
   - 手动编辑任何字段
   - 复制改写后的内容

---

## 🔄 后续操作

### 当添加新笔记时

飞书表格中添加新笔记后，"复刻链接"字段会是空的。

**解决方法**：再次访问生成链接页面，点击"开始生成"

系统会：
- 跳过已有链接的记录（不重复生成）
- 只为新记录生成链接

### 当修改笔记内容时

如果修改了笔记的标题、正文或标签，复刻链接不会自动更新。

**解决方法**：再次运行"开始生成"，系统会用新数据覆盖旧链接

---

## 📱 快捷访问

在内容工厂左侧菜单中，点击 **"生成复刻链接"** 可以快速进入生成页面。

---

## ⚠️ 注意事项

### 1. 字段要求
- 只有同时包含"标题"和"正文"的记录才会生成链接
- "话题标签"可以为空

### 2. 生成时间
- 记录越多，生成时间越长
- 每条记录间隔200ms，避免飞书API频率限制
- 100条记录大约需要20-30秒

### 3. 链接格式
生成的链接格式为：
```
https://content-factory-jade-nine.vercel.app/rewrite?title=xxx&content=xxx&tags=xxx
```

所有中文和特殊字符都会自动进行URL编码。

### 4. 复刻链接字段类型
- 必须是"URL"或"超链接"类型
- 不能是"文本"或"按钮"类型

---

## 🎯 完整工作流程示例

### iOS快捷指令 → 飞书 → 复刻

1. **采集笔记**
   - 在小红书App中分享笔记
   - 运行iOS快捷指令"保存到飞书"
   - 笔记自动保存到飞书表格

2. **生成链接**
   - 打开 `http://localhost:3000/generate-links`
   - 点击"开始生成"
   - 等待完成

3. **复刻笔记**
   - 在飞书表格中点击"复刻链接"
   - 自动跳转并填充数据
   - 点击"一键改写"生成新内容
   - 复制使用

---

## 🆘 常见问题

### Q1: 点击链接没反应？
**A:** 检查：
- 复刻链接字段是否为"URL"类型
- 链接是否完整（以 https:// 开头）
- 浏览器是否阻止了弹窗

### Q2: 跳转后数据没有填充？
**A:** 检查浏览器控制台（F12），看URL参数是否正确传递。

### Q3: 生成失败怎么办？
**A:** 检查：
- 飞书环境变量是否配置正确
- 网络连接是否正常
- 查看生成页面的错误提示

### Q4: 能否自动为新笔记生成链接？
**A:** 目前需要手动运行生成。未来可以考虑：
- 使用飞书自动化（Automation）
- 或通过Webhook自动触发

---

## 🎉 优势

相比飞书按钮字段的方案：

✅ **稳定可靠** - 不依赖飞书按钮的变量引用功能
✅ **灵活可控** - 可以随时重新生成链接
✅ **批量操作** - 一次性为所有笔记生成链接
✅ **易于维护** - 链接格式清晰，便于调试

---

**现在您可以访问 http://localhost:3000/generate-links 开始使用了！**
