# 内容工厂 - 复刻页面测试指南

**测试日期**：2026-02-06
**功能**：图片上传 + AI改写 + 小红书发布

---

## 🌐 测试网址

```
https://content-factory-jade-nine.vercel.app/rewrite
```

**部署状态**：Vercel 正在部署中（约2-3分钟）

---

## 📋 测试流程

### 步骤1：上传图片

1. 访问测试网址
2. 在左侧找到"图片上传"区域
3. **方式1**：点击上传区域，选择1-18张图片
4. **方式2**：直接拖拽图片到上传区域
5. 确认图片显示在下方预览区

**图片要求**：
- 格式：JPG、PNG
- 数量：1-18张
- 建议：统一使用 3:4 竖版比例
- 推荐尺寸：1080×1440

---

### 步骤2：编辑或AI改写文案

#### 方式A：手动编辑
1. 在右侧"标题"框中输入标题
2. 在"正文"框中输入正文
3. 在"话题标签"框中输入标签（空格分隔）

#### 方式B：AI改写（推荐）
1. 先输入初始标题和正文
2. 点击"改写标题"按钮（等待3-5秒）
3. 点击"改写正文"按钮（等待10-20秒）
4. 或直接点击"一键改写全部"

**提示词自定义**：
- 可以在"改写设置"中修改提示词
- 修改后再点击改写按钮

---

### 步骤3：预览笔记

1. 点击右下方的"预览笔记"按钮
2. 查看小红书笔记的真实样式：
   - 图片轮播（3:4比例）
   - 标题显示
   - 正文显示
   - 话题标签显示
3. 左右切换查看所有图片
4. 确认无误后关闭预览

---

### 步骤4：发布到小红书

1. 点击"发布笔记"按钮
2. 等待处理（约10-30秒）：
   - 正在上传图片...（图片上传到云端）
   - 正在保存文章...（保存到数据库）
   - 正在发布到小红书...（调用发布API）
3. 看到二维码弹窗
4. 用手机微信扫描二维码
5. 在手机端完成发布

**进度提示**：
- 上传图片：0-50%
- 保存文章：50-75%
- 调用API：75-100%

---

## ✅ 测试检查清单

### 功能测试

**图片上传**：
- [ ] 可以点击上传
- [ ] 可以拖拽上传
- [ ] 可以一次选择多张
- [ ] 图片显示预览
- [ ] 可以删除图片
- [ ] 显示图片计数（X/18）

**AI改写**：
- [ ] "改写标题"按钮可用
- [ ] "改写正文"按钮可用
- [ ] "一键改写全部"按钮可用
- [ ] 改写后标题确实不同
- [ ] 改写后正文确实不同
- [ ] 可以自定义提示词

**预览功能**：
- [ ] "预览笔记"按钮可用
- [ ] 弹窗显示小红书样式
- [ ] 图片轮播正常
- [ ] 标题、正文、标签都显示
- [ ] 可以左右切换图片

**发布功能**：
- [ ] "发布笔记"按钮可用
- [ ] 显示上传进度
- [ ] 显示处理步骤提示
- [ ] 发布成功后显示二维码
- [ ] 二维码清晰可扫

---

## ❌ 可能的错误和解决方法

### 错误1：图片上传失败

**症状**：点击"发布笔记"后提示"图片上传失败"

**原因**：
- 图片太大（超过10MB）
- 网络不稳定
- Vercel Blob 配额不足

**解决**：
1. 压缩图片到 < 5MB
2. 重试上传
3. 检查网络连接

---

### 错误2：API Key未配置

**症状**：提示"MyAIBot API密钥未配置"

**原因**：Vercel 环境变量中没有设置 `MYAIBOT_API_KEY`

**解决**：
1. 登录 Vercel Dashboard
2. 进入项目 → Settings → Environment Variables
3. 添加：
   ```
   MYAIBOT_API_KEY=rn_95b1c43fa86396bbb84b2a1c86863d7303c6d40cc217e69ea7133296cff2
   ```
4. 重新部署

---

### 错误3：二维码无法扫描

**症状**：二维码显示但扫码无效

**原因**：
- 二维码已过期
- MyAIBot API 返回错误

**解决**：
1. 查看浏览器控制台（F12）的错误信息
2. 重新点击"发布笔记"
3. 如果持续失败，查看 Vercel 函数日志

---

### 错误4：页面显示"开发中"

**症状**：点击"发布笔记"后弹出"发布功能开发中..."

**原因**：浏览器缓存了旧版本代码

**解决**：
1. 硬刷新页面：`Ctrl + Shift + R`（Windows）或 `Cmd + Shift + R`（Mac）
2. 或清除浏览器缓存
3. 等待 Vercel 部署完成（2-3分钟）

---

## 🔍 调试技巧

### 查看浏览器控制台

1. 按 `F12` 打开开发者工具
2. 切换到"Console"标签
3. 查看日志输出：
   ```
   [发布] 开始上传 3 张图片
   [发布] 图片上传完成，获得 3 个URL
   [发布] 文章已保存，ID: 123
   [发布] 发布成功: {...}
   ```

### 查看网络请求

1. 开发者工具 → "Network"标签
2. 点击"发布笔记"
3. 查看API请求：
   - `POST /api/upload/images` - 图片上传
   - `POST /api/articles` - 文章保存
   - `POST /api/xiaohongshu/publish` - 小红书发布
4. 点击请求查看响应数据

---

## 📊 预期结果

### 成功发布的完整流程

1. ✅ 上传3张图片
2. ✅ AI改写标题和正文
3. ✅ 预览确认无误
4. ✅ 点击"发布笔记"
5. ✅ 看到进度提示：
   - "正在上传图片..."
   - "正在保存文章..."
   - "正在发布到小红书..."
6. ✅ 看到二维码弹窗：
   - 显示成功图标
   - 显示"发布成功！"
   - 显示清晰的二维码
   - 显示笔记ID
7. ✅ 用手机扫码
8. ✅ 在手机端完成发布

---

## 📝 测试反馈

请测试后提供反馈：

**1. 哪些功能正常工作？**
- [ ] 图片上传
- [ ] AI改写
- [ ] 预览功能
- [ ] 发布功能

**2. 遇到了什么问题？**
- 描述问题：
- 错误信息：
- 截图（如有）：

**3. 改进建议**
-

---

## 🆘 需要帮助？

如果测试中遇到问题：

1. **查看浏览器控制台**（F12 → Console）
2. **截图错误信息**
3. **告诉我具体的报错内容**

我会立即帮你解决！

---

## 📚 相关文档

- [图片上传和发布指南](./docs/图片上传和发布指南.md)
- [复刻页面功能完善方案](./docs/复刻页面功能完善方案.md)
- [MyAIBot API文档](https://www.myaibot.vip/docs/api)

---

**创建时间**：2026-02-06
**有效期**：长期有效
**维护者**：Claude Code
